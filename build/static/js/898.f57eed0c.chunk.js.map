{"version":3,"file":"static/js/898.f57eed0c.chunk.js","mappings":"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","sources":["pages/Article/index.js","apis/article.js"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport { getlist, addlist, editlist, dellist } from '@/apis/article'\nimport { EditOutlined, DeleteOutlined } from '@ant-design/icons'\nimport {\n  Table,\n  Input,\n  Space,\n  Modal,\n  Button,\n  Form,\n  Popconfirm,\n  message,\n} from 'antd'\nconst Acticle = () => {\n  const columns = [\n    {\n      title: '名称',\n      dataIndex: 'name',\n      width: 220,\n    },\n    {\n      title: '别名',\n      width: 160,\n      dataIndex: 'alias',\n    },\n    {\n      title: '操作',\n      render: (data) => {\n        return (\n          <Space size=\"middle\">\n            <Button\n              type=\"primary\"\n              shape=\"circle\"\n              icon={<EditOutlined />}\n              onClick={() => onEditinfo(data)}\n            />\n            <Popconfirm\n              title=\"删除文章\"\n              description=\"确认要删除当前文章吗?\"\n              onConfirm={() => onConfirm(data)}\n              okText=\"Yes\"\n              cancelText=\"No\"\n            >\n              <Button\n                type=\"primary\"\n                danger\n                shape=\"circle\"\n                icon={<DeleteOutlined />}\n              />\n            </Popconfirm>\n          </Space>\n        )\n      },\n    },\n  ]\n  const [form] = Form.useForm()\n  const onEditinfo = (data) => {\n    setIsRecord(data)\n    setisdislog(true)\n  }\n  const onConfirm = async (data) => {\n    await dellist(Number(data.id))\n    message.success('删除成功')\n    setArticleList(\n      articleList.filter((item) => {\n        return item.id !== data.id\n      })\n    )\n  }\n  const [isdislog, setisdislog] = useState(false)\n  const showModal = () => {\n    setisdislog(true)\n  }\n  const [recordobject, setIsRecord] = useState({})\n  const [articleList, setArticleList] = useState([])\n  // 提交表单\n  const handleOk = async (values) => {\n    console.log(values)\n    if (recordobject.id) {\n      let res = await editlist({ ...values, id: recordobject.id })\n      if (res.status == 1) {\n        return message.error(`修改失败:${res.message}`)\n      }\n      message.success('修改成功')\n    } else {\n      await addlist(values)\n      message.success('添加成功')\n    }\n    setisdislog(false)\n    setArticleList([...articleList, values])\n  }\n  const onFinishFailed = (errorInfo) => {\n    console.log('Failed:', errorInfo)\n  }\n  useEffect(() => {\n    async function getarticleList() {\n      const res = await getlist()\n      setArticleList(res.data)\n    }\n    if (isdislog) {\n      form.setFieldsValue({ ...recordobject })\n    } else {\n      getarticleList()\n    }\n  }, [articleList.length, recordobject])\n  return (\n    <>\n      <div>\n        <Button onClick={showModal} type=\"primary\">\n          添加\n        </Button>\n      </div>\n      <div>\n        <Table\n          rowKey={(record, index) => index}\n          columns={columns}\n          dataSource={articleList}\n        ></Table>\n      </div>\n      <Modal\n        title={recordobject.id ? '编辑' : '添加'}\n        okButtonProps={{\n          style: {\n            display: 'none',\n          },\n        }}\n        cancelButtonProps={{\n          style: {\n            display: 'none',\n          },\n        }}\n        open={isdislog}\n        onCancel={() => {\n          setisdislog(false)\n          setIsRecord({})\n          form.resetFields()\n        }}\n      >\n        <Form\n          name=\"xxx\"\n          form={form}\n          labelCol={{\n            span: 4,\n          }}\n          wrapperCol={{\n            span: 18,\n          }}\n          style={{\n            maxWidth: 600,\n          }}\n          initialValues={{\n            remember: true,\n          }}\n          onFinish={handleOk}\n          onFinishFailed={onFinishFailed}\n          autoComplete=\"off\"\n        >\n          <Form.Item\n            label=\"名称\"\n            name=\"name\"\n            rules={[\n              {\n                required: true,\n                message: '请输入名称',\n              },\n            ]}\n          >\n            <Input />\n          </Form.Item>\n          <Form.Item\n            label=\"别名\"\n            name=\"alias\"\n            rules={[\n              {\n                required: true,\n                message: '请输入别名!',\n              },\n            ]}\n          >\n            <Input />\n          </Form.Item>\n          <Form.Item\n            wrapperCol={{\n              offset: 8,\n              span: 16,\n            }}\n          >\n            <Button type=\"primary\" htmlType=\"submit\">\n              Submit\n            </Button>\n          </Form.Item>\n        </Form>\n      </Modal>\n    </>\n  )\n}\nexport default Acticle\n","// 封装和文章相关的接口函数\n// 查询\nimport { request } from '@/utils'\nexport function getlist() {\n  return request({\n    url: '/my/article/cates',\n    method: 'GET',\n  })\n}\n// 添加\nexport function addlist(data) {\n  return request({\n    url: '/my/article/addcate',\n    method: 'post',\n    data,\n  })\n}\n// 编辑\nexport function editlist(data) {\n  return request({\n    url: `/my/article/editcate`,\n    method: 'post',\n    data,\n  })\n}\n//删除\nexport function dellist(data) {\n  return request({\n    url: `/my/article/delcate/${data}`,\n    method: 'get',\n  })\n}\n"],"names":["Acticle","columns","title","dataIndex","width","render","data","_jsxs","Space","size","children","_jsx","Button","type","shape","icon","EditOutlined","onClick","onEditinfo","Popconfirm","description","onConfirm","okText","cancelText","danger","DeleteOutlined","form","Form","useForm","setIsRecord","setisdislog","async","request","url","concat","method","dellist","Number","id","message","success","setArticleList","articleList","filter","item","isdislog","useState","recordobject","useEffect","setFieldsValue","res","getarticleList","length","_Fragment","showModal","Table","rowKey","record","index","dataSource","Modal","okButtonProps","style","display","cancelButtonProps","open","onCancel","resetFields","name","labelCol","span","wrapperCol","maxWidth","initialValues","remember","onFinish","console","log","values","status","error","addlist","onFinishFailed","errorInfo","autoComplete","Item","label","rules","required","Input","offset","htmlType"],"sourceRoot":""}